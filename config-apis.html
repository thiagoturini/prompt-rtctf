<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurar APIs - RTCTF</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .config-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .config-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .config-header h1 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .config-header p {
            color: #666;
            font-size: 18px;
        }
        
        .api-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .api-card {
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 25px;
            background: white;
            transition: all 0.3s ease;
        }
        
        .api-card:hover {
            border-color: #4CAF50;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.2);
        }
        
        .api-card.recommended {
            border-color: #4CAF50;
            background: linear-gradient(135deg, #f8fff8, #ffffff);
        }
        
        .api-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .api-icon {
            font-size: 32px;
            margin-right: 15px;
        }
        
        .api-title {
            font-size: 24px;
            font-weight: bold;
            margin: 0;
        }
        
        .api-subtitle {
            color: #666;
            margin: 0;
            font-size: 14px;
        }
        
        .api-features {
            list-style: none;
            padding: 0;
            margin: 15px 0;
        }
        
        .api-features li {
            padding: 5px 0;
            color: #555;
        }
        
        .api-features li:before {
            content: "‚úÖ ";
            color: #4CAF50;
        }
        
        .api-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 10px 0;
            transition: border-color 0.3s ease;
        }
        
        .api-input:focus {
            outline: none;
            border-color: #4CAF50;
        }
        
        .api-link {
            display: inline-block;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 8px;
            margin: 10px 0;
            transition: transform 0.3s ease;
        }
        
        .api-link:hover {
            transform: translateY(-2px);
            text-decoration: none;
        }
        
        .save-section {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #f0f8ff, #e8f5e8);
            border-radius: 15px;
            margin-top: 30px;
        }
        
        .save-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
            transition: transform 0.3s ease;
        }
        
        .save-btn:hover {
            transform: translateY(-2px);
        }
        
        .back-btn {
            background: #666;
            color: white;
            text-decoration: none;
            padding: 12px 25px;
            border-radius: 8px;
            display: inline-block;
            margin-bottom: 20px;
        }
        
        .status-indicator {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .status-valid {
            background: #4CAF50;
            color: white;
        }
        
        .status-invalid {
            background: #ff6b35;
            color: white;
        }
        
        .instructions {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #4CAF50;
        }
        
        .free-badge {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .premium-badge {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div class="config-container">
        <a href="index.html" class="back-btn">‚Üê Voltar para o RTCTF</a>
        
        <div class="config-header">
            <h1>üöÄ Configurar APIs de IA</h1>
            <p>Configure as melhores APIs de IA para obter resultados perfeitos</p>
        </div>

        <div class="api-grid">
            <!-- Groq (Recomendado - Gratuito) -->
            <div class="api-card recommended">
                <div class="api-header">
                    <div class="api-icon">‚ö°</div>
                    <div>
                        <h3 class="api-title">
                            Groq
                            <span class="free-badge">100% GR√ÅTIS</span>
                        </h3>
                        <p class="api-subtitle">Recomendado para iniciantes</p>
                    </div>
                </div>
                
                <ul class="api-features">
                    <li>Completamente gratuito</li>
                    <li>Ultra-r√°pido (Mixtral-8x7B)</li>
                    <li>Sem necessidade de cart√£o</li>
                    <li>Limite generoso por dia</li>
                </ul>
                
                <div class="instructions">
                    <strong>üìã Como obter:</strong><br>
                    1. Acesse console.groq.com/keys<br>
                    2. Crie conta gratuita<br>
                    3. Clique "Create API Key"<br>
                    4. Copie a chave (come√ßa com gsk_...)
                </div>
                
                <a href="https://console.groq.com/keys" target="_blank" class="api-link">
                    üîë Obter Chave Gratuita
                </a>
                
                <input 
                    type="password" 
                    class="api-input" 
                    id="groq-key" 
                    placeholder="gsk_..." 
                    data-service="groq"
                >
                <span class="status-indicator" id="groq-status"></span>
            </div>

            <!-- OpenAI -->
            <div class="api-card">
                <div class="api-header">
                    <div class="api-icon">ü§ñ</div>
                    <div>
                        <h3 class="api-title">
                            OpenAI
                            <span class="premium-badge">PREMIUM</span>
                        </h3>
                        <p class="api-subtitle">Melhor qualidade (GPT-3.5)</p>
                    </div>
                </div>
                
                <ul class="api-features">
                    <li>Qualidade excepcional</li>
                    <li>GPT-3.5 Turbo</li>
                    <li>Resultados mais precisos</li>
                    <li>Custo baixo (~$0.002/1k tokens)</li>
                </ul>
                
                <div class="instructions">
                    <strong>üìã Como obter:</strong><br>
                    1. Acesse platform.openai.com/api-keys<br>
                    2. Crie conta e adicione $5+ de cr√©dito<br>
                    3. Gere nova chave secreta<br>
                    4. Copie a chave (come√ßa com sk-...)
                </div>
                
                <a href="https://platform.openai.com/api-keys" target="_blank" class="api-link">
                    üîë Obter Chave OpenAI
                </a>
                
                <input 
                    type="password" 
                    class="api-input" 
                    id="openai-key" 
                    placeholder="sk-..." 
                    data-service="openai"
                >
                <span class="status-indicator" id="openai-status"></span>
            </div>

            <!-- Anthropic Claude -->
            <div class="api-card">
                <div class="api-header">
                    <div class="api-icon">üß†</div>
                    <div>
                        <h3 class="api-title">
                            Anthropic Claude
                            <span class="premium-badge">PREMIUM</span>
                        </h3>
                        <p class="api-subtitle">Intelig√™ncia avan√ßada</p>
                    </div>
                </div>
                
                <ul class="api-features">
                    <li>Claude Haiku (r√°pido)</li>
                    <li>Excelente para an√°lise</li>
                    <li>Respostas detalhadas</li>
                    <li>Boa rela√ß√£o custo/benef√≠cio</li>
                </ul>
                
                <div class="instructions">
                    <strong>üìã Como obter:</strong><br>
                    1. Acesse console.anthropic.com<br>
                    2. Crie conta e adicione cr√©ditos<br>
                    3. V√° em API Keys<br>
                    4. Copie a chave (come√ßa com sk-ant-...)
                </div>
                
                <a href="https://console.anthropic.com/" target="_blank" class="api-link">
                    üîë Obter Chave Claude
                </a>
                
                <input 
                    type="password" 
                    class="api-input" 
                    id="anthropic-key" 
                    placeholder="sk-ant-..." 
                    data-service="anthropic"
                >
                <span class="status-indicator" id="anthropic-status"></span>
            </div>

            <!-- Google Gemini -->
            <div class="api-card">
                <div class="api-header">
                    <div class="api-icon">üîÆ</div>
                    <div>
                        <h3 class="api-title">
                            Google Gemini
                            <span class="free-badge">GR√ÅTIS*</span>
                        </h3>
                        <p class="api-subtitle">*Com limita√ß√µes</p>
                    </div>
                </div>
                
                <ul class="api-features">
                    <li>Limite gratuito generoso</li>
                    <li>Gemini Pro modelo</li>
                    <li>Boa para uso casual</li>
                    <li>Sem necessidade de cart√£o</li>
                </ul>
                
                <div class="instructions">
                    <strong>üìã Como obter:</strong><br>
                    1. Acesse aistudio.google.com/app/apikey<br>
                    2. Fa√ßa login com conta Google<br>
                    3. Clique "Create API Key"<br>
                    4. Copie a chave (come√ßa com AIza...)
                </div>
                
                <a href="https://aistudio.google.com/app/apikey" target="_blank" class="api-link">
                    üîë Obter Chave Gemini
                </a>
                
                <input 
                    type="password" 
                    class="api-input" 
                    id="gemini-key" 
                    placeholder="AIza..." 
                    data-service="gemini"
                >
                <span class="status-indicator" id="gemini-status"></span>
            </div>
        </div>

        <div class="save-section">
            <h3>üíæ Salvar Configura√ß√µes</h3>
            <p>Suas chaves ficam salvas apenas no seu navegador - nunca s√£o enviadas para outros lugares</p>
            
            <button class="save-btn" onclick="saveAllKeys()">
                üíæ Salvar e Voltar ao RTCTF
            </button>
            
            <button class="save-btn" onclick="testConnections()" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                üß™ Testar Conex√µes
            </button>
        </div>
    </div>

    <script src="config.js"></script>
    <script>
        // Carregar chaves existentes ao carregar a p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            loadExistingKeys();
            setupRealTimeValidation();
        });
        
        // Carregar chaves j√° salvas
        function loadExistingKeys() {
            const services = ['groq', 'openai', 'anthropic', 'gemini'];
            
            services.forEach(service => {
                const key = localStorage.getItem(`${service}_api_key`);
                const input = document.getElementById(`${service}-key`);
                const status = document.getElementById(`${service}-status`);
                
                if (key && !key.includes('DEMO')) {
                    input.value = key;
                    updateStatus(service, true);
                } else {
                    updateStatus(service, false);
                }
            });
        }
        
        // Valida√ß√£o em tempo real
        function setupRealTimeValidation() {
            const inputs = document.querySelectorAll('.api-input');
            
            inputs.forEach(input => {
                input.addEventListener('input', function() {
                    const service = this.dataset.service;
                    const isValid = validateKey(service, this.value);
                    updateStatus(service, isValid);
                });
            });
        }
        
        // Validar formato da chave
        function validateKey(service, key) {
            if (!key || key.length < 10) return false;
            
            const patterns = {
                groq: /^gsk_[a-zA-Z0-9_-]{40,}$/,
                openai: /^sk-[a-zA-Z0-9]{40,}$/,
                anthropic: /^sk-ant-[a-zA-Z0-9_-]{40,}$/,
                gemini: /^AIza[a-zA-Z0-9_-]{30,}$/
            };
            
            return patterns[service] ? patterns[service].test(key) : key.length > 20;
        }
        
        // Atualizar indicador de status
        function updateStatus(service, isValid) {
            const status = document.getElementById(`${service}-status`);
            
            if (isValid) {
                status.textContent = 'V√°lida';
                status.className = 'status-indicator status-valid';
            } else {
                status.textContent = 'Inv√°lida';
                status.className = 'status-indicator status-invalid';
            }
        }
        
        // Salvar todas as chaves
        function saveAllKeys() {
            const services = ['groq', 'openai', 'anthropic', 'gemini'];
            let saved = 0;
            
            services.forEach(service => {
                const input = document.getElementById(`${service}-key`);
                const key = input.value.trim();
                
                if (key && validateKey(service, key)) {
                    localStorage.setItem(`${service}_api_key`, key);
                    saved++;
                }
            });
            
            if (saved > 0) {
                alert(`‚úÖ ${saved} chave(s) salva(s) com sucesso!\n\nVoltando ao RTCTF...`);
                window.location.href = 'index.html';
            } else {
                alert('‚ùå Nenhuma chave v√°lida para salvar.\n\nVerifique os formatos e tente novamente.');
            }
        }
        
        // Testar conex√µes
        async function testConnections() {
            const services = ['groq', 'openai', 'anthropic', 'gemini'];
            const results = [];
            
            for (const service of services) {
                const input = document.getElementById(`${service}-key`);
                const key = input.value.trim();
                
                if (key && validateKey(service, key)) {
                    try {
                        const success = await testAPIConnection(service, key);
                        results.push(`${service}: ${success ? '‚úÖ Funcionando' : '‚ùå Falhou'}`);
                    } catch (e) {
                        results.push(`${service}: ‚ùå Erro: ${e.message}`);
                    }
                } else {
                    results.push(`${service}: ‚è≠Ô∏è N√£o configurado`);
                }
            }
            
            alert('üß™ Resultados dos Testes:\n\n' + results.join('\n'));
        }
        
        // Testar conex√£o espec√≠fica da API
        async function testAPIConnection(service, key) {
            const endpoints = {
                groq: 'https://api.groq.com/openai/v1/models',
                openai: 'https://api.openai.com/v1/models',
                anthropic: 'https://api.anthropic.com/v1/models', // Pode n√£o funcionar por CORS
                gemini: `https://generativelanguage.googleapis.com/v1beta/models?key=${key}`
            };
            
            const headers = {
                groq: { 'Authorization': `Bearer ${key}` },
                openai: { 'Authorization': `Bearer ${key}` },
                anthropic: { 'x-api-key': key, 'anthropic-version': '2023-06-01' },
                gemini: {}
            };
            
            try {
                const response = await fetch(endpoints[service], {
                    headers: headers[service]
                });
                
                return response.ok;
            } catch (e) {
                console.error(`Erro testando ${service}:`, e);
                return false;
            }
        }
    </script>
</body>
</html>
